<ion-content>
  <ion-header>
    <ion-toolbar>
      <ion-title>Rendez-vous avec {{ medecin.prenom }} {{ medecin.nom }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="calendar">
    <div class="calendar-header">
      <ion-button (click)="previousMonth()">Précédent</ion-button>
      <span>{{ getMonthYear() }}</span>
      <ion-button (click)="nextMonth()">Suivant</ion-button>
    </div>
    <div class="calendar-grid">
      <div class="calendar-day-header" *ngFor="let day of ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim']">
        {{ day }}
      </div>
      <div class="calendar-day" *ngFor="let day of calendarDays" 
           [ngClass]="{
             'available': day.isAvailable,
             'unavailable': !day.isAvailable,
             'today': day.isToday,
             'selected': selectedDay === day.date
           }"
           (click)="selectDay(day)">
        {{ day.date.getDate() }}
      </div>
    </div>
  </div>

  <div *ngIf="selectedDay" class="time-slots">
    <h3>Créneaux disponibles le {{ selectedDay | date:'dd/MM/yyyy' }}</h3>
    <ion-list>
      <ion-item *ngFor="let slot of getHoursForSelectedDay()" 
                [ngClass]="{'unavailable-slot': !slot.disponible}"
                (click)="slot.disponible && (selectedHeure = slot.heure)">
        <ion-label>{{ slot.heure }}</ion-label>
        <ion-icon *ngIf="selectedHeure === slot.heure" name="checkmark-circle" slot="end"></ion-icon>
      </ion-item>
    </ion-list>
    <ion-button expand="block" (click)="createRendezVous()" [disabled]="!selectedHeure">Confirmer</ion-button>
  </div>

  <ion-button expand="block" (click)="goToAccueil()">Retour à l'accueil</ion-button>
</ion-content>